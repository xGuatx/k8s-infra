# 
#   FICHIER DE SECRETS POUR DISASTER RECOVERY                     
# 
#
# Ce fichier contient les secrets minimaux necessaires pour:
#   1. Redeployer l'infrastructure complete depuis zero
#   2. Restaurer depuis un backup
#
#   IMPORTANT:
#   - Renommer ce fichier en `.env.tmp` avant utilisation
#   - Remplir les valeurs avec vos vrais secrets
#   - NE JAMAIS commiter ce fichier dans git
#   - Sauvegarder dans KeePass/1Password/Bitwarden
#
# 

# 
# MOTS DE PASSE SSH/SUDO (OBLIGATOIRES)
# 
# Utilises pour se connecter aux machines k8s-master-1-15
# et executer les commandes avec sudo

SSH_PASSWORD=your_ssh_password_here
SUDO_PASSWORD=your_sudo_password_here

# 
# ANSIBLE VAULT PASSWORD (OPTIONNEL POUR PREMIER DEPLOIEMENT)
# 
# Si vous avez deja deploye et que vous voulez restaurer:
#   - Recuperer depuis /tmp/k8s-infra/CREDENTIALS.txt (si sauvegarde)
#   - OU depuis /opt/k8s-backups/<timestamp>/secrets/.vault_password
#
# Si c'est votre premier deploiement:
#   - Laisser vide, sera genere automatiquement
#   - SAUVEGARDER le fichier CREDENTIALS.txt genere!

# VAULT_PASSWORD=

# 
# CLE GPG POUR BACKUPS SECURISES (OPTIONNEL)
# 
# Si vous voulez dechiffrer des backups GPG existants:
#   - Importer la cle privee GPG sur k8s-orchestrator
#   - Commande: gpg --import backup-gpg-private.key
#
# Si premier deploiement:
#   - Une cle GPG sera generee automatiquement
#   - SAUVEGARDER backup-gpg-private.key genere!

# GPG_BACKUP_KEY=backup@example.com

# 
# USAGE
# 
#
# 1. Renommer en .env.tmp:
#    cp .env.tmp.example .env.tmp
#
# 2. Remplir les mots de passe SSH/SUDO (obligatoire)
#
# 3. Rendre le fichier prive:
#    chmod 600 .env.tmp
#
# 4. Lancer le deploiement:
#    ./deploy.sh
#
#    OU restaurer depuis backup:
#    ./restore.sh
#
# 
# SCENARIOS
# 
#
# SCENARIO 1: Premier deploiement (machines vierges)
# --------------------------------------------------
# Fichier .env.tmp:
#   SSH_PASSWORD=<votre_mot_de_passe>
#   SUDO_PASSWORD=<votre_mot_de_passe>
#
# Commande:
#   ./deploy.sh
#
# Resultat:
#    Tous les secrets generes automatiquement
#    CREDENTIALS.txt cree  A SAUVEGARDER!
#    Cluster deploye
#    Premier backup cree
#
# SCENARIO 2: Restauration apres desastre (avec backups)
# -------------------------------------------------------
# Fichier .env.tmp:
#   SSH_PASSWORD=<votre_mot_de_passe>
#   SUDO_PASSWORD=<votre_mot_de_passe>
#   # VAULT_PASSWORD sera recupere depuis le backup
#
# Commande:
#   ./restore.sh
#
# Resultat:
#    Secrets restaures depuis backup
#    Cluster reconstruit
#    Donnees restaurees (MySQL, Drupal, Velero)
#
# SCENARIO 3: Redeploiement (secrets existants)
# ----------------------------------------------
# Si vous avez deja CREDENTIALS.txt sauvegarde:
#
# Fichier .env.tmp:
#   SSH_PASSWORD=<votre_mot_de_passe>
#   SUDO_PASSWORD=<votre_mot_de_passe>
#   VAULT_PASSWORD=<depuis_CREDENTIALS.txt>
#
# Puis copier manuellement:
#   1. ansible/.vault_password (depuis CREDENTIALS.txt ou backup)
#   2. ansible/inventory/group_vars/vault.yml (depuis backup)
#
# Commande:
#   ./deploy.sh  # Mode idempotent, reutilise secrets existants
#
# 
# SAUVEGARDES A FAIRE ABSOLUMENT
# 
#
# Apres le PREMIER deploiement, sauvegarder dans Password Manager:
#
#   1. Ce fichier .env.tmp (mots de passe SSH/Sudo)
#   2. /tmp/k8s-infra/CREDENTIALS.txt (tous les secrets)
#   3. /tmp/k8s-infra/ansible/.vault_password (vault key)
#   4. /tmp/k8s-infra/backup-gpg-private.key (cle GPG, si existe)
#
# Sans ces fichiers, restauration = IMPOSSIBLE
#
# 
